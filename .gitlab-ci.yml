# Defaults
variables:
  SRC_DIR: '.'

include:
  -  project: 'hyva-themes/base-ci'
     file: 'lint/php.yml'
     ref: main
  -  project: 'hyva-themes/base-ci'
     file: 'static/phpcs.yml'
     ref: main
  -  project: 'hyva-themes/base-ci'
     file: 'test/integration.yml'
     ref: main
  -  project: 'hyva-themes/base-ci'
     file: 'test/cypress.yml'
     ref: main

test:integration:
    extends: .test:integration
    parallel:
        matrix:
            - MAGEVERSION: ['2.4.0', '2.4.5']

test:cypress:
    extends: .test:cypress
    parallel:
        matrix:
            # The cypress tests do not pass on 2.4.0 because the customer API is missing the login feature
            - MAGEVERSION: ['2.4.1', '2.4.5']
